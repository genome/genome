#!/usr/bin/env genome-perl

use strict;
use warnings;

BEGIN {
    $ENV{UR_DBI_NO_COMMIT} = 1;
    $ENV{UR_USE_DUMMY_AUTOGENERATED_IDS} = 1;
};

use above "Genome";
use Test::More tests => 4;

use_ok('Genome::Model::SomaticValidation::Command::ImportTargetSet');

my $test_bed_data = <<'EOBED'
1	0	2	feature1
1	10	100	feature2
1	1000	1001	feature3
2	5	6	feature4
X	9	1000	feature5
EOBED
;

my $bed_file = Genome::Sys->create_temp_file_path;
Genome::Sys->write_file($bed_file, $test_bed_data);

my $cmd = Genome::Model::SomaticValidation::Command::ImportTargetSet->create(
    target_set_file => $bed_file,
    oid => '12345',
    reference => Genome::Model::Build::ReferenceSequence->get_by_name('GRCh37-lite-build37'),
);
isa_ok($cmd, 'Genome::Model::SomaticValidation::Command::ImportTargetSet', 'created command');

$cmd->dump_status_messages(1);
ok($cmd->execute, 'executed import command');
isa_ok($cmd->feature_list, 'Genome::FeatureList', 'created feature-list');
