#!/usr/bin/env genome-perl

use strict;
use warnings;

BEGIN {
    $ENV{UR_DBI_NO_COMMIT} = 1;
    $ENV{UR_USE_DUMMY_AUTOGENERATED_IDS} = 1;
};

use above "Genome";

use Test::More tests => 9;

use_ok('Genome::Model::Build::Somatic');

#TODO These are builds of apipe-test-01-somatic from two different points in time;
#it would be much better to have test examples that to go on that would perform consistently.
my @example_build_ids = (101802088, 104183257); 

my @builds = Genome::Model::Build->get(\@example_build_ids);

for my $build (@builds) {
    isa_ok($build, 'Genome::Model::Build::Somatic', 'got a somatic build for id');

    #Note: This test would fail on some really old builds
    my $inputs = $build->somatic_workflow_inputs;
    ok($inputs, 'Got back somatic inputs');

    my $sniper_snv_file = $build->somatic_workflow_input("sniper_snp_output");
    ok(-s $sniper_snv_file, "got sniper snv file from accessor");
    my $sniper_indel_file = $build->somatic_workflow_input("sniper_indel_output");
    ok(-s $sniper_indel_file, "got sniper indel file from accessor");
}
