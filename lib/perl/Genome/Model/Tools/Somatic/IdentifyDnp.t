#!/usr/bin/env genome-perl

use strict;
use warnings;

use above "Genome";
use Test::More;
use File::Compare;
use POSIX;

$ENV{UR_DBI_NO_COMMIT} = 1;
$ENV{UR_USE_DUMMY_AUTOGENERATED_IDS} = 1;

BEGIN {
    my $archos = POSIX::uname;
    if ($archos !~ /64/) {
        plan skip_all => "Must run from a 64-bit machine";
    } else {
        plan tests => 3;
    }
    use_ok( 'Genome::Model::Tools::Somatic::IdentifyDnp');
};

#The following are just tests I set up to determine the code was functioning correctly. More tests would be good for edge cases and any dependencies.
my $fake_read_seq = "ACTATCG";
my $fake_read_pos = 228;
my $fake_cigar = "3M1D4M";

my $offset = Genome::Model::Tools::Somatic::IdentifyDnp->_calculate_offset(231,$fake_read_pos, $fake_cigar);
ok(!defined($offset));
$offset = Genome::Model::Tools::Somatic::IdentifyDnp->_calculate_offset(232,$fake_read_pos, $fake_cigar);
ok(substr($fake_read_seq,$offset,1) eq "A");
