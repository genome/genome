#!/usr/bin/env genome-perl

BEGIN { 
    $ENV{UR_DBI_NO_COMMIT} = 1;
    $ENV{UR_USE_DUMMY_AUTOGENERATED_IDS} = 1;
}

use strict;
use warnings;

use above "Genome";
use Test::More;
use Genome::Utility::Test;

my $pkg = 'Genome::Model::Tools::Bedpe::EvaluateBedpe';
use_ok($pkg);
my $version = "v1";

my $data_dir = Genome::Utility::Test->data_dir_ok($pkg, $version);

my $cmd = $pkg->create(
    bedpe => File::Spec->join($data_dir, 'a.bedpe'),
    gold_bedpe => File::Spec->join($data_dir, 'gold.bedpe'),
    bedtools_version => '2.17.0',
    slop => 0,
);
ok($cmd->execute, "Command executed ok");

my $expected_stats = {
    true_positive => 1,
    false_positive => 1,
    false_negative => 1,
    ppv => .5,
    sensitivity => .5,
    f1 => .5,
};
is_deeply($expected_stats, $cmd->rawstats, "stats were set correctly");

done_testing;

