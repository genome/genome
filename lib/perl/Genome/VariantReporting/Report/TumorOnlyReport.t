#!/usr/bin/env genome-perl

BEGIN { 
    $ENV{UR_DBI_NO_COMMIT} = 1;
    $ENV{UR_USE_DUMMY_AUTOGENERATED_IDS} = 1;
}

use strict;
use warnings;

use above "Genome";
use Test::More;
use Genome::VariantReporting::Report::TestHelper qw(test_report_result);

my $pkg = 'Genome::VariantReporting::Report::TumorOnlyReport';
use_ok($pkg);

my $data_dir = __FILE__.".d";

my $interpretations = {
    'position' => {
        T => {
            chromosome_name => 1,
            start => 1,
            stop => 1,
            reference => 'A',
            variant => 'T',
        },
        G => {
            chromosome_name => 1,
            start => 1,
            stop => 1,
            reference => 'A',
            variant => 'G',
        },
    },
    'vep' => {
        T => {
            transcript_name   => 'ENST00000452176',
            trv_type          => 'DOWNSTREAM',
            amino_acid_change => '',
            default_gene_name => 'RP5-857K21.5',
            ensembl_gene_id   => 'ENSG00000223659',
            gene_name_source  => 'HGNC',
            c_position        => 'c.456',
            canonical         => 1,
            sift              => 'deleterious(5.4)',
        },
        G => {
            transcript_name   => 'ENST00000452176',
            trv_type          => 'DOWNSTREAM',
            amino_acid_change => '',
            default_gene_name => 'RP5-857K22.5',
            ensembl_gene_id   => 'ENSG00000223695',
            gene_name_source  => 'HGNC',
            c_position        => 'c.456',
            canonical         => 1,
        },
    },
    'rsid' => {
        T => {
            rsid => "rs1",
        },
        G => {
            rsid => "rs1",
        },
    },
    'caf' => {
        T => {
            dbSNP_caf => ".1",
        },
        G => {
            dbSNP_caf => ".1",
        },
    },
    'nhlbi' => {
        T => {
            NHLBI_All_MAF => "0.1",
            NHLBI_EU_MAF => "0.1",
            NHLBI_AA_MAF => "0.3",
        },
        G => {
            NHLBI_All_MAF => "0.1",
            NHLBI_EU_MAF => "0.1",
            NHLBI_AA_MAF => "0.3",
        },
    },
    '1kg' => {
        T => {
            '1kg-af' => 0.001,
        },
        G => {
            '1kg-af' => 0.001,
        },
    },
    'vaf' => {
        T => {
            sample_name_vaf => "30",
            sample_name_ref_count => 0,
            sample_name_var_count => 200,
        },
        G => {
            sample_name_vaf => "70",
            sample_name_ref_count => 0,
            sample_name_var_count => 1000,
        },
    },
};

test_report_result(
    data_dir => $data_dir,
    pkg => $pkg,
    interpretations => $interpretations,
);
done_testing;
