#!/usr/bin/env genome-perl

use strict;
use warnings FATAL => 'all';

use Test::More;
use above 'Genome';
use Genome::VariantReporting::Framework::Dag qw(generate_dag);
use Genome::VariantReporting::Framework::TestHelpers qw(test_dag_xml);
use Genome::VariantReporting::Framework::Plan::TestHelpers; # defines classes

BEGIN {
    $ENV{UR_DBI_NO_COMMIT} = 1;
    $ENV{UR_USE_DUMMY_AUTOGENERATED_IDS} = 1;
};

my $plan = Genome::VariantReporting::Framework::Plan::MasterPlan->create_from_file(plan_file());
test_dag_xml(generate_dag($plan, 'snvs'), __FILE__);

done_testing();

sub plan_file {
    return File::Spec->join(test_dir(), 'test.yaml');
}

sub test_dir {
    return __FILE__ . ".d";
}

