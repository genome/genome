#!/usr/bin/env genome-perl

use strict;
use warnings;

BEGIN {
    $ENV{UR_DBI_NO_COMMIT} = 1;
    $ENV{UR_USE_DUMMY_AUTOGENERATED_IDS} = 1;
};

use above 'Genome';
use Test::More tests => 3;

use_ok('Genome::SoftwareResult::View::Status::Xml');

my $s = Genome::Sample->create(
    common_name => 'test',
    name => 'test for software_result xml view',
);

my $r = Genome::Model::Tools::DetectVariants2::Result::Manual->__define__(
    sample => $s,
    control_sample => $s,
    original_file_path => '/tmp/only-a-test',
    username => 'apipe-tester',
);
$r->lookup_hash($r->calculate_lookup_hash);

$r->add_user(label => 'testy', user => $s);

my $view = $r->create_view(perspective => 'status', toolkit => 'xml');
ok($view, 'created view');

my $c = $view->content;
ok($c, 'generated content');
